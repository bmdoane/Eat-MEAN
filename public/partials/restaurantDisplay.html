<h1>{{ vm.restaurant.name }} - <restaurant-rating starsAtt="vm.stars"></restaurant-rating>
</h1>
<p>{{ vm.restaurant.formatted_address }}</p>

<h3>Reviews</h3>
<ul>
	<li ng-repeat="review in vm.restaurant.reviews"><strong>{{ review.name }} says:</strong> {{ review.review }}</li>
</ul>

<!-- Hide form if user is not logged in -->
<div ng-if="vm.isLoggedIn()">
	<form name="vm.reviewForm" ng-submit="vm.addReview()">
		Your name: <input type="text" name="name" required ng-minlength="2" ng-model="vm.name">
		<div ng-show="vm.reviewForm.name.$dirty && vm.reviewForm.name.$invalid && vm.isSubmitted">
			<p>Name should be more than 2 characters long</p>
		</div>

		Your rating: <input type="number" name="rating" required ng-pattern="/^[1-5]$/" ng-model="vm.rating">
		<div ng-show="vm.reviewForm.rating.$dirty && vm.reviewForm.rating.$invalid && vm.isSubmitted">
			<p>Rating must be between 1-5</p>
		</div>

		Your review: <textarea name="review" required ng-model="vm.review"></textarea>
		<div ng-show="vm.reviewForm.rating.$dirty && vm.isSubmitted">
			<p>Please add a review</p>
		</div>

		<button type="submit" class="btn">Add review</button>	
		
	</form>
</div>